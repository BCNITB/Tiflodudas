<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <!-- TODO ADMIN USER *ngIf="logged == 'connected'"-->
      <a (click)="logout()" title="Cerrar sesión" role="button" *ngIf="logged == 'connected'">
        <ion-icon name="log-out-outline" aria-hidden="true" slot="end"></ion-icon>
      </a>
    </ion-buttons>
    <ion-title>Iniciar Sesión</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Iniciar Sesión</ion-title>
    </ion-toolbar>
  </ion-header>

  <p>
    Para poder iniciar sesión debes de estar registrado como administrador de la apliación.
  </p>
  <p>
    Si eres administrados podrás modificar las entradas y crear nuevas. Si no eres administrador podrás realizar consultas
    y enviar dudas, así como colaborar con las consultas aún no solucionadas o aportar nuevas soluciones.
  </p>

  <!-- ADMIN OF ADMIN USERS -->
  <!--<app-register></app-register>-->
  
  <!-- TODO: ADMIN USER *ngIf="logged == 'no connected'" -->
  <!--<app-acces></app-acces>-->
  <!--<form [formGroup]="formLogin" (submit)="onSubmit()" *ngIf="logged == 'no connected'">
    <ion-list>
      <ion-item  class="l-txt">
        <ion-label for="email" position="floating">Introduce el correo electrónico</ion-label>
        <ion-input name="email" formControlName="email"></ion-input>
      </ion-item>
  
      <ion-item  class="normal-txt">
        <ion-label for="password" position="floating">Contraseña</ion-label>
        <ion-input name="password" formControlName="password" type="password"></ion-input>
      </ion-item>
  
      <ion-item *ngIf="submitAttempt">
        <p class="error">{{ msgLabel }}</p>
      </ion-item>
    </ion-list>
    <ion-row>
      <ion-col class="flex-container"> 
        <button type="submit" name="submit" [disabled]="formLogin.invalid" id="success" tabindex="1">Enviar</button>
        <button type="reset" class="danger" tabindex="1" id="cancel">Borrar</button>
      </ion-col>
    </ion-row>
  </form>-->
  <form *ngIf="logged == 'no connected'" >
    <fieldset>
      <legend>Acceso de usuarios</legend>
      <div class="flex-container">
        <label id="mailLbl">Correo Electrónico</label>
        <input aria-labelledby="mailLbl" ([ngModel])="mail" type="email" reuired>
      </div>
      <div class="flex-container">
        <label id="passLbl">Contraseña</label>
        <input aria-labelledby="passLbl" ([ngModel])="pass" type="password" reuired>
      </div>
      <div class="flex-container">
        <button title="Acceder" (click)="login()">Acceder</button>
        <button title="Borrar" (click)="erase()" class="danger">Borrar</button>
        <button title="Borrar" (click)="cancel()">Cancelar</button>
      </div>
    </fieldset>
  </form>

  <h2>{{mail}}</h2>
  <h2>{{pass}}</h2>

  <div *ngIf="logged == 'connected'">
    <p *ngIf="count == 0">
      No hay soluciones propuestas.
    </p>
    <p *ngIf="count > 0">
      Hay {{ count }} 
      <span *ngIf="count > 1">soluciones proupuestas</span>
      <span *ngIf="count == 1">solución proupuesta</span> 
      para revisar.
    </p>

    <p *ngIf="countNew == 0">
      No hay nuevas aportaciones.
    </p>
    <p *ngIf="countNew > 0">
      Hay {{ countNew }} 
      <span *ngIf="countNew > 1">nuevas aportaciones</span>
      <span *ngIf="countNew == 1">nueva aportación</span> 
      para revisar.
    </p>

    <div class="flex-container">
      <button (click)="seeSol(1)" *ngIf="count == 1">Ver Propuesta</button>
      <button (click)="seeSol(1)" *ngIf="count > 1">Ver Propuestas</button>
      <button (click)="seeSol(2)" *ngIf="countNew == 1">Ver Aportación</button>
      <button (click)="seeSol(2)" *ngIf="countNew > 1">Ver Aportaciones</button>
      <button routerLink="/new-entry/admin">Nueva Entrada</button>
    </div>
  </div>
</ion-content>